--- ./Makefile.in.org	Mon Aug 23 14:56:08 2004
+++ ./Makefile.in	Mon Aug 23 15:24:50 2004
@@ -44,7 +44,7 @@
 scriptdir=@scriptdir@
 utildir=@utildir@
 docdir=@docdir@
-vardir=@vardir@
+vardir=@localstatedir@
 tmpdir=@tmpdir@
 lockdir=@lockdir@
 
--- ./configure.in.org	Mon Aug 23 14:56:49 2004
+++ ./configure.in	Mon Aug 23 15:49:02 2004
@@ -1,5 +1,6 @@
 dnl Process this file with autoconf to produce a configure script.
-AC_INIT(bin/rip/whois_rip.c)
+AC_INIT([ripe-dbase], [3.2.0], [dbrip@ripe.net])
+AC_CONFIG_SRCDIR(bin/rip/whois_rip.c)
 AC_CONFIG_HEADER(include/config.h)
 
 AC_CONFIG_SUBDIRS(utils/whoisRIP)
@@ -23,21 +24,19 @@
 dnl installation directory layout
 dnl
 topdir=$prefix
-bindir=${topdir}/bin
-confdir=${topdir}/conf
-scriptdir=${topdir}/scripts
-utildir=${topdir}/utils
-docdir=${topdir}/doc
-vardir=${topdir}/var
-tmpdir=${vardir}/tmp
-lockdir=${vardir}/lock
+ripedata=${datadir}/ripe
+scriptdir=${ripedata}/scripts
+utildir=${ripedata}/utils
+docdir=${datadir}/doc
+tmpdir=${localstatedir}/tmp
+lockdir=${localstatedir}/lock
 
 libdir=${topdir}/lib/gnudl
 mandir=${topdir}/man/man1
 
 #######
 # Log infrastructure
-logdir=${topdir}/log
+logdir=${localstatedir}/log/ripe
 qrylog=${logdir}/qry
 dbuperr=${logdir}/dbuperr
 allriperr=${logdir}/riperr
@@ -53,12 +52,9 @@
 crosslog=${logdir}/cross
 
 AC_SUBST(topdir)
-AC_SUBST(bindir)
-AC_SUBST(confdir)
 AC_SUBST(scriptdir)
 AC_SUBST(utildir)
 AC_SUBST(docdir)
-AC_SUBST(vardir)
 AC_SUBST(tmpdir)
 AC_SUBST(lockdir)
 
@@ -81,7 +77,23 @@
 AC_SUBST(libdir)
 AC_SUBST(mandir)
 
-
+#####################
+### Configs location:
+###
+dnl Where are configs...
+AC_ARG_WITH(config-dir,
+	    AC_HELP_STRING([--with-config-dir=DIR],[Set config file path (default: sysconfdir/conf)]),
+	    if test "x$with_config_dir" = xyes; then
+		    RIPE_CONFIGDIR="${sysconfdir}/conf"
+	    else
+		    if test "x$with_config_dir" = xno; then
+			    AC_MSG_ERROR(Config directory required)
+		    else
+			    RIPE_CONFIGDIR="$with_config_dir"
+		    fi
+	    fi,
+	    RIPE_CONFIGDIR="${sysconfdir}/conf")
+AC_SUBST(confdir, $RIPE_CONFIGDIR)
 
 dnl
 dnl glib-config
